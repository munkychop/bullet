!function(){"use strict";function a(){function a(a,b,c){this.message="Bullet:: ["+a+"] "+b+", but received: "+c;var d=new Error(this.message);void 0!==d.stack&&(this.stack=d.stack)}function b(a,b,c,d){this.message="Bullet:: ["+a+"] Expected parameter - "+b+" - to be type: "+d+", but received type: "+typeof c;var e=new TypeError(this.message);void 0!==e.stack&&(this.stack=e.stack)}function c(a){this.message="Bullet:: ["+a+"] Expected event name parameter to be longer than 0 characters";var b=new Error(this.message);void 0!==b.stack&&(this.stack=b.stack)}function d(a){this.message="Bullet:: ["+a+"] Expected event names array to contain one or more event names";var b=new Error(this.message);void 0!==b.stack&&(this.stack=b.stack)}function e(a,b){this.message="Bullet:: ["+a+'] Event string: "'+b+'" does not exist within the events dictionary\nPlease use the Bullet.addEventName method to add this string.';var c=new Error(this.message);void 0!==c.stack&&(this.stack=c.stack)}function f(a,b){this.message="Bullet:: ["+a+'] Event string: "'+b+'" is not mapped to any callbacks\nPlease use the Bullet.on method to map this string to a callback.';var c=new Error(this.message);void 0!==c.stack&&(this.stack=c.stack)}function g(a,b){for(var c in m[a].callbacks){var d=m[a].callbacks[c];"function"==typeof d.cb&&d.cb(b),"boolean"==typeof d.once&&!0===d.once&&l.off(a,d.cb)}}function h(a){var b={};for(var c in a)b[c]={cb:a[c].cb,once:a[c].once};return b}function i(a){for(var b in m[a].callbacks){var c=m[a].callbacks[b].cb;c[k].totalEvents--,0===c[k].totalEvents?delete c[k]:delete c[k][a]}}function j(){for(var a in m)i(a)}a.prototype=new Error,a.prototype.name=a.name,a.prototype.constructor=a,b.prototype=new TypeError,b.prototype.name=b.name,b.prototype.constructor=b,c.prototype=new Error,c.prototype.name=c.name,c.prototype.constructor=c,d.prototype=new Error,d.prototype.name=d.name,d.prototype.constructor=d,e.prototype=new Error,e.prototype.name=e.name,e.prototype.constructor=e,f.prototype=new Error,f.prototype.name=f.name,f.prototype.constructor=f;var k="__bullet_pubsub__",l=this,m={},n=!1,o=!0;l._errors={ParamCountError:a,ParamTypeError:b,EventNameLengthError:c,EventNamesArrayLengthError:d,UndeclaredEventError:e,UnmappedEventError:f},l.events={},l._getMappings=function(){var a={};for(var b in m)a[b]={callbacks:h(m[b].callbacks),totalCallbacks:m[b].totalCallbacks};return a},l.on=function(d,f,g){if(arguments.length<2||arguments.length>3)throw new a("on","Expected between 2 and 3 parameters",arguments.length);if("string"!=typeof d)throw new b("on","event name",d,"string");if(0===d.length)throw new c("on");if(n&&void 0===l.events[d])throw new e("on",d);if("function"!=typeof f)throw new b("on","callback",f,"function");if(void 0!==g&&"boolean"!=typeof g)throw new b("on","once",g,"boolean");var h=null;void 0!==m[d]?(void 0===f[k]&&(f[k]={totalEvents:0}),void 0===f[k][d]&&(h=m[d].totalCallbacks,m[d].totalCallbacks++,m[d].callbacks[h]={cb:f,once:"boolean"==typeof g&&g},f[k][d]=h,f[k].totalEvents++),"boolean"==typeof g&&(h=f[k][d],m[d].callbacks[h].once=g)):(m[d]={callbacks:{}},h=0,m[d].callbacks[h]={cb:f,once:!!g},m[d].totalCallbacks=1,void 0===f[k]?(f[k]={},f[k].totalEvents=1):f[k].totalEvents++,f[k][d]=h)},l.once=function(d,f){if(2!==arguments.length)throw new a("once","Expected 2 parameters",arguments.length);if("string"!=typeof d)throw new b("once","event name",d,"string");if(0===d.length)throw new c("once");if(n&&void 0===l.events[d])throw new e("once",d);if("function"!=typeof f)throw new b("once","callback",f,"function");l.on(d,f,!0)},l.off=function(a,d){if(0===arguments.length)return j(),void(m={});if("string"!=typeof a)throw new b("off","event name",a,"string");if(0===a.length)throw new c("off");if(n&&void 0===l.events[a])throw new e("off",a);if(void 0!==m[a])if("function"==typeof d){var f=d[k][a],g=m[a].callbacks[f];void 0!==g&&(delete m[a].callbacks[f],delete d[k][a],m[a].totalCallbacks--,d[k].totalEvents--,0===m[a].totalCallbacks&&delete m[a],0===d[k].totalEvents&&delete d[k])}else{if(void 0!==d)throw new b("off","callback",d,"function");i(a),delete m[a]}},l.replaceCallback=function(a,d,g,h){if("string"!=typeof a)throw new b("replaceCallback","event name",a,"string");if(0===a.length)throw new c("replaceCallback");if(void 0===m[a])throw new f("replaceCallback",a);if(n&&void 0===l.events[a])throw new e("replaceCallback",a);if("function"!=typeof d)throw new b("replaceCallback","callback",d,"function");if("function"!=typeof g)throw new b("replaceCallback","callback",g,"function");if(void 0!==h&&"boolean"!=typeof h)throw new b("replaceCallback","once",h,"boolean");l.off(a,d),l.on(a,g,h)},l.replaceAllCallbacks=function(a,d,g){if("string"!=typeof a)throw new b("replace","event name",a,"string");if(0===a.length)throw new c("replace");if(void 0===m[a])throw new f("replace",a);if(n&&void 0===l.events[a])throw new e("replace",a);if("function"!=typeof d)throw new b("replace","callback",d,"function");if(void 0!==g&&"boolean"!=typeof g)throw new b("replace","once",g,"boolean");l.off(a),l.on(a,d,g)},l.trigger=function(a,d){if("string"!=typeof a)throw new b("trigger","event name",a,"string");if(0===a.length)throw new c("trigger");if(n&&void 0===l.events[a])throw new e("trigger",a);if(void 0!==m[a])o&&"undefined"!=typeof window?window.setTimeout(function(){g(a,d)},0):g(a,d);else if(n)throw new f("trigger",a)},l.addEventName=function(a){if("string"!=typeof a)throw new b("addEventName","event name",a,"string");if(0===a.length)throw new c("addEventName");l.events[a]=a},l.addMultipleEventNames=function(a){if(!(a instanceof Array))throw new b("addMultipleEventNames","event names",a,"array");if(0===a.length)throw new d("addMultipleEventNames");var c=0,e=a.length;for(c;c<e;c++){var f=a[c];l.addEventName(f)}},l.removeEventName=function(a){if("string"!=typeof a)throw new b("removeEventName","event name",a,"string");if(0===a.length)throw new c("removeEventName");l.events[a]&&delete l.events[a]},l.getStrictMode=function(){return!0===n},l.setStrictMode=function(a){if("boolean"!=typeof a)throw new b("setStrictMode","strict mode",a,"boolean");n=a},l.getTriggerAsync=function(){return!0===o},l.setTriggerAsync=function(a){if("boolean"!=typeof a)throw new b("setTriggerAsync","trigger async",a,"boolean");o=a}}"undefined"!=typeof define&&define.amd?define(function(){return new a}):"undefined"!=typeof module&&module.exports?module.exports=new a:window.Bullet=new a}();